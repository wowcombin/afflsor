# CURSOR COMPOSER INSTRUCTIONS

## üéØ –ü–ï–†–ï–î –ù–ê–ß–ê–õ–û–ú –õ–Æ–ë–û–ô –ó–ê–î–ê–ß–ò

1. **–ü—Ä–æ—á–∏—Ç–∞–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–µ–∫—Ç–∞:**
   ```
   @vision/.1 @vision/.2 @vision/.3 @vision/.4 @vision/.5 @vision/.6 @vision/.7
   ```

2. **–ò–∑—É—á–∏ –ø—Ä–∞–≤–∏–ª–∞:**
   ```
   @.cursorrules
   @.cursor/rules/user-interaction.md
   @.cursor/rules/project-architecture.md
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å —Å—Ö–µ–º—É –ë–î:**
   ```
   @supabase/migrations/
   ```

## üîê RLS –ü–û–õ–ò–¢–ò–ö–ò - –ö–†–ò–¢–ò–ß–ù–û

–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö:
- ‚úÖ –í—Å–µ–≥–¥–∞ –≤–∫–ª—é—á–∞–π —Ä–æ–ª–∏: manager, admin, hr –≤ –ø–æ–ª–∏—Ç–∏–∫–∏
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–π –¥–æ—Å—Ç—É–ø –¥–ª—è –∫–∞–∂–¥–æ–π —Ä–æ–ª–∏
- ‚ùå –ù–∏–∫–æ–≥–¥–∞ –Ω–µ —Å–æ–∑–¥–∞–≤–∞–π –ø–æ–ª–∏—Ç–∏–∫–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è —á–∞—Å—Ç–∏ —Ä–æ–ª–µ–π

## üîÑ API –†–ê–ó–†–ê–ë–û–¢–ö–ê

–®–∞–±–ª–æ–Ω –¥–ª—è API:
```typescript
// –í–°–ï–ì–î–ê –∏—Å–ø–æ–ª—å–∑—É–π —ç—Ç–æ—Ç —à–∞–±–ª–æ–Ω
export async function GET(request: NextRequest) {
  try {
    const supabase = await createClient()
    const { data: { user }, error } = await supabase.auth.getUser()
    if (!user) return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })
    
    console.log('API called:', { endpoint, user: user.email })
    
    // –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
    
    return NextResponse.json(result)
  } catch (error) {
    console.error('API Error:', error)
    return NextResponse.json({ 
      error: 'Internal server error',
      details: error.message 
    }, { status: 500 })
  }
}
```

## üîç –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å–æ–∑–¥–∞–≤–∞–π:
1. `/debug-auth` - –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
2. `/test-api` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API endpoints
3. –ü—Ä–æ—Å—Ç—ã–µ API –±–µ–∑ JOIN –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

## ‚úÖ –ü–†–û–í–ï–†–ö–ò –ü–ï–†–ï–î –ö–û–ú–ú–ò–¢–û–ú

```bash
npm run build  # –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –±–µ–∑ –æ—à–∏–±–æ–∫
npm run lint   # –ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
npm run typecheck  # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∏–ø—ã
```

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ó–ê–ü–†–ï–¢–´

1. **RLS –±–µ–∑ manager —Ä–æ–ª–∏** - –æ—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º –¥–æ—Å—Ç—É–ø–∞
2. **API –±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏** - –Ω–∞—Ä—É—à–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
3. **–°—Ç–∞—Ç–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ** - —Ç–æ–ª—å–∫–æ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
4. **–ö–æ–º–º–∏—Ç—ã —Å –æ—à–∏–±–∫–∞–º–∏** - –ª–æ–º–∞–µ—Ç CI/CD

## üí¨ –ö–û–ú–ú–£–ù–ò–ö–ê–¶–ò–Ø

**–í—Å–µ–≥–¥–∞ –æ–±—ä—è—Å–Ω—è–π:**
- –ö–æ—Ä–µ–Ω—å –ø—Ä–æ–±–ª–µ–º—ã
- –ü–æ—à–∞–≥–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ
- –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

**–ù–µ –≥–æ–≤–æ—Ä–∏:**
- "–î–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å"
- "–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑"
- –ù–µ—Ç–æ—á–Ω—ã–µ –¥–∏–∞–≥–Ω–æ–∑—ã
