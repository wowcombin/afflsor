2-7: Детальная функциональность по ролям
Раздел 2: Junior
2.1 Дашборд Junior
URL: /junior/dashboard
Компоненты интерфейса:
KPI карточки (4 основные метрики):
Профит за текущий месяц
Успешность выводов (%)
Позиция в рейтинге
До выплаты (дней)
График профита за 7/14/30 дней (линейный)
Таблица последних 5 операций
Уведомления о статусах выводов
Данные из БД:
sql
SELECT SUM(ww.withdrawal_amount - w.deposit_amount) as profit
FROM works w
JOIN work_withdrawals ww ON ww.work_id = w.id
WHERE w.junior_id = ? AND ww.status = 'received'
  AND w.work_date >= date_trunc('month', CURRENT_DATE)
2.2 Создание депозита
URL: /junior/work/new
Workflow:
Выбор казино из назначенных
Проверка доступных карт (баланс банка >= $10)
Ввод логина/пароля для казино
Указание суммы депозита
Показ реквизитов карты (PAN/CVV) через модальное окно с TTL 60 сек
Подтверждение создания работы
API вызовы:
typescript
// Получение доступных карт
GET /api/cards/my?casino_id={id}
// Фильтрация по балансу банка
WHERE bank_balance >= 10

// Показ реквизитов
POST /api/cards/{id}/reveal
Body: { context: { casino_id, work_id }, totp_code }

// Создание работы
POST /api/works
Body: { casino_id, card_id, deposit_amount, credentials }
2.3 Управление выводами
URL: /junior/withdrawals
Функционал:
Создание нового вывода для активной работы
Смена статуса new ↔ waiting (до проверки менеджером)
Просмотр истории выводов с фильтрацией
Просмотр причин отклонения/блокировки
Таблица выводов:
Дата
Казино
Депозит
Вывод
Профит
Статус
Действия
15.01
Casino1
$200
$450
$250
Waiting
[Отменить]
14.01
Casino2
$150
$320
$170
Received
-
13.01
Casino3
$100
-
-
Problem
[Детали]

2.4 Профиль и настройки
Функционал:
Просмотр личных данных (read-only)
Просмотр процента и бонуса
Настройка 2FA
Смена пароля
История зарплат
Раздел 3: Tester
3.1 Дашборд Tester
URL: /tester/dashboard
Компоненты:
Статистика протестированных казино
Очередь казино на тестирование
График успешности тестов
Быстрые действия (новый тест, обновить мануал)
3.2 Тестирование казино
URL: /tester/sites/{id}/test
Workflow тестирования:
Получение тестовой карты (автоматическое назначение)
Создание тестового депозита
Проверка функционала казино по чек-листу:
Процесс регистрации
Депозит
Игровой процесс
Вывод средств
Время обработки
Фиксация результатов в отчете
Обновление статуса казино (approved/rejected)
Публикация мануала
Форма отчета:
typescript
{
  registration_time: number,
  deposit_success: boolean,
  withdrawal_time: number,
  issues_found: string[],
  recommended_bins: string[],
  test_result: 'approved' | 'rejected'
}
3.3 Управление мануалами
URL: /tester/sites/{id}/manual
Редактор мануала:
WYSIWYG редактор с версионированием
Секции: регистрация, депозит, вывод, важные моменты
Вставка скриншотов
История изменений (diff view)
Публикация с уведомлением junior'ов
Раздел 4: Manager
4.1 Дашборд Manager
URL: /manager/dashboard
Компоненты:
Очередь выводов на проверку (виджет с счетчиком)
Профит команды за день/неделю/месяц
Матрица эффективности Junior×Casino
Критические алерты
Live activity (последние действия команды)
4.2 Проверка выводов
URL: /manager/withdrawals/queue
Интерфейс очереди:
tsx
<DataTable
  columns={[
    'Время ожидания', // подсветка если > 4ч
    'Junior (рейтинг)',
    'Казино',
    'Карта',
    'Депозит/Вывод',
    'Профит',
    'Действия'
  ]}
  filters={['status', 'junior', 'amount_range']}
  quickActions={[
    'Подтвердить все < $200',
    'Экспорт в Excel'
  ]}
/>
Drawer проверки:
Левая панель: история Junior с этим казино, статистика успешности
Центр: детали текущего вывода
Правая панель: действия (Approve/Problem/Block) с комментарием
4.3 Управление картами
URL: /manager/cards
Функционал:
Просмотр всех карт с группировкой по банкам
Просмотр и редактирование баланса банковских аккаунтов
Назначение карт junior'ам (с проверкой BIN и баланса)
Массовое назначение через визард
Блокировка/разблокировка карт
История использования карты
Визард назначения:
Выбор казино
Выбор junior'ов (с фильтрами по опыту и результатам)
Автоподбор совместимых карт (BIN match + баланс >= $10)
Предпросмотр распределения
Подтверждение и отправка уведомлений
4.4 Управление командой
URL: /manager/team
Таблица команды:
Junior
Статус
Карт активно
Профит (мес)
Успешность
Действия
Анна С.
Active
3
$2,450
87%
[Детали] [Карты]
Иван П.
Active
5
$3,120
92%
[Детали] [Карты]

4.5 Управление балансами банков
URL: /manager/banks
Интерфейс:
tsx
{banks.map(bank => (
  <Card key={bank.id}>
    <CardHeader>{bank.name} - {bank.country}</CardHeader>
    <CardContent>
      {bank.accounts.map(account => (
        <BankBalanceEditor
          account={account}
          canEdit={true}
          onUpdate={(balance, comment) => updateBalance(account.id, balance, comment)}
        />
      ))}
    </CardContent>
  </Card>
))}
Раздел 5: HR
5.1 Дашборд HR
URL: /hr/dashboard
Компоненты:
Статистика по сотрудникам (активные/уволенные)
График текучести кадров
Календарь дней рождения и годовщин
Задачи по онбордингу новых сотрудников
5.2 Управление сотрудниками
URL: /hr/users
Создание нового сотрудника:
typescript
POST /api/users
{
  email: string,
  role: 'junior' | 'tester' | 'manager',
  first_name: string,
  last_name: string,
  telegram_username: string,
  usdt_wallet: string,
  salary_percentage: number,
  salary_bonus: number
}
// Ответ: temp_password, nda_link
HR комментарии:
Типы: positive, neutral, negative, note
Уровни видимости: приватный (только HR), для менеджмента, публичный
Привязка к событиям (повышение, предупреждение, поощрение)
5.3 NDA управление
URL: /hr/nda
Функционал:
Создание новых версий NDA
Отслеживание подписаний
Автоматическая отправка при создании пользователя
История версий с diff
5.4 Отчеты по эффективности
URL: /hr/reports
Типы отчетов:
Эффективность по ролям
Сравнение junior'ов
Динамика профита по месяцам
Корреляция стажа и результатов
5.5 Управление балансами
URL: /hr/banks
Права HR:
Просмотр всех балансов
Редактирование с обязательным комментарием
Просмотр истории изменений
Получение уведомлений о критически низких балансах
Раздел 6: CFO
6.1 Дашборд CFO
URL: /cfo/dashboard
Компоненты:
P&L текущего месяца
График Cash Flow
Распределение расходов (donut chart)
Прогноз на конец месяца
ROI по направлениям
6.2 Финансовые операции
URL: /cfo/finance
Расчет зарплат:
typescript
// Месячный расчет
POST /api/finance/salary/calculate
{
  month: '2025-01',
  exchange_rate: 0.95
}

// Процесс:
1. Сбор всех received выводов
2. Расчет профита по формуле
3. Применение процентов и бонусов
4. Формирование USDT переводов
5. Обнуление балансов после выплаты
Учет расходов:
Категории: goods, bases, docs, banks, drawings, licenses, other
Привязка к банковским аккаунтам
Месячные лимиты по категориям
6.3 Управление банками и картами
URL: /cfo/banks
Полные права CFO:
Создание банков и аккаунтов
Полный контроль балансов всех аккаунтов
Добавление карт (bulk import)
Установка лимитов розовых карт
Блокировка аккаунтов с каскадным эффектом
Массовое добавление карт:
typescript
POST /api/cards/bulk
{
  bank_account_id: uuid,
  cards: [
    { card_number, exp_month, exp_year, cvv, type: 'grey' | 'pink' }
  ]
}
6.4 USDT переводы
URL: /cfo/transfers
Типы переводов:
daily - ежедневные junior'ам
salary - месячные зарплаты
other - прочие
Процесс перевода:
Создание с идемпотентным ключом
Подтверждение суммы и адреса
Отправка через внешний API
Сохранение transaction hash
Обновление статуса
6.5 Отчетность
URL: /cfo/reports
Финансовые отчеты:
P&L (помесячный)
Cash Flow Statement
Balance Sheet
Детализация по казино/junior'ам
Экспорт в Excel с формулами
Раздел 7: CEO/Admin
7.1 Дашборд CEO
URL: /admin/dashboard
Компоненты:
Сводная матрица Revenue/Expenses/Profit/ROI
Тренды по всем ключевым метрикам
Топ-5 лучших/худших показателей
Критические алерты требующие внимания
Прогнозы на квартал
7.2 Полный доступ
CEO/Admin имеет доступ ко всем функциям других ролей плюс:
Системные настройки (/admin/settings):
session_timeout
auto_approve_limit
pink_cards_daily_limit
max_cards_per_junior
Аудит (/admin/audit):
Полная история всех действий
Фильтрация по пользователям/таблицам/действиям
Экспорт логов
Анализ подозрительной активности
Управление резервными копиями (/admin/backup):
Создание manual backup
Настройка расписания
Восстановление на момент времени
Тестирование восстановления
7.3 Специальные функции CEO
Массовые операции:
Блокировка всех карт банка
Остановка всех операций junior'а
Массовое обновление процентов
Экстренная блокировка системы
Override права:
Изменение любых данных с аудитом
Просмотр всех секретных данных
Отмена любых операций
Прямой доступ к БД через SQL консоль
7.4 Мониторинг системы
URL: /admin/monitoring
Метрики:
Использование БД (размер, запросы/сек)
Активные сессии
Очередь уведомлений
Состояние Edge Functions
Rate limits и throttling
7.5 Управление доступом
Временные права:
Предоставление временного повышения прав
Делегирование функций
Аварийный доступ с двойным подтверждением
Каждая роль имеет четко определенные границы функционала с логическим завершением всех процессов через отчеты, уведомления или статистику, обеспечивая полный контроль и прозрачность операций.

